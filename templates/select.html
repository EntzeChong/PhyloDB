{% extends 'base.html' %}

{% block jquery %}
    <script src="../media/jquery/jquery.js" type="text/javascript"></script>
    <script src="../media/jquery/jquery-ui.custom.js" type="text/javascript"></script>
    <script src="../media/jquery/jquery.cookie.js" type="text/javascript"></script>

    <link rel='stylesheet' type='text/css' href="../media/dynatree/ui.dynatree.css">
    <script src="../media/dynatree/jquery.dynatree.js" type="text/javascript"></script>
{% endblock %}

{% block pagetitle %}
    <title>Select</title>
{% endblock %}

{% block dynatree %}
    <script type="text/javascript">
        $(function () {
            // Initialize tree
            $("#tree").dynatree({
                checkbox: true,
                selectMode: 3,
                onSelect: function (node) {
                    var selKeys = $.map($("#tree").dynatree("getSelectedNodes"), function (node) {
                        return node.data.uuid;
                    });
                    $('#textField').val(selKeys.join(","));  // uuids for all selected samples (no projects)
                } // end onSelect
            }); // end tree
        }); // end function
    </script>
{% endblock %}
project
{% block content %}
    <h2>Select any combination of data for analysis:</h2>
    <form>
        <table border="2">
            <th style="padding-right: 100px;">Project/Samples</th>
            <tr>
                <td style="vertical-align: top">
                    <div id="tree">
                        <ul>
                            <li title="root">All Projects
                                <ul>
                                    {% for project in projects %}
                                        <li title={{ project.project_name }} tooltip={{ project.project_desc }}>
                                        Project: {{ project.project_name }}
                                        <ul>
                                            {% for sample in samples %}
                                                {% if sample.projectid_id == project.projectid %}
                                                    <li title={{ sample.sample_name }}
                                                                data="uuid: {{ sample.sampleid }}">
                                                    Sample: {{ sample.sample_name }}
                                                {% endif %}
                                            {% endfor %}
                                        </ul>
                                    {% endfor %}
                                </ul>
                        </ul>
                    </div>
                </td>
            </tr>
        </table>
        <br>
    </form>
    <div id="textField">
        <!-- need to send this to norm.html not alert box -->
        <input type="button" id="button" onclick="alert($('#textField').val())" value="Select"/>
    </div>

    <!-- note on page -->
    <p>Might be useful to provide users with a table of info regarding samples<br>
        More than just project/sample name?<br>
        After normalization, we can have sample meta data/taxonomy trees for more detailed selection.</p>
{% endblock %}

